package com.rules4j.tests;

import static org.junit.Assert.fail;

import java.util.HashMap;
import java.util.Map;
import java.util.stream.Stream;

import org.junit.Assert;
import org.junit.Test;

import com.rules4j.data.IRule;
import com.rules4j.data.Rule;
import com.rules4j.data.constraints.EqualsConstraint;
import com.rules4j.data.filters.Filter;

public class RuleEngineTests extends TestBase {

	public void test() {
		fail("Not yet implemented");
	}

	@Test
	public void shouldBePossibleEvaluateRule() {
		IRule rule = new Rule();
		Filter filter = rule.addAndFilter();
		filter.Add(new EqualsConstraint("Name", "John Doe"));
		this.addRule(rule);

		Map<String, Object> data = new HashMap<String, Object>();
		data.put("Name", "John Doe");

		Stream<IRule> rules = this.engine.evaluate(data);

		Assert.AreEqual(1, rules.Count());
	}

}
